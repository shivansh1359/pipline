<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShareConnect - Real-Time Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b6b, #ffd93d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .connection-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .connection-code {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .code-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 25px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            font-size: 1.5em;
            font-weight: bold;
            letter-spacing: 3px;
            border: 2px solid #ffd93d;
            box-shadow: 0 0 20px rgba(255, 217, 61, 0.3);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
        }

        .btn-primary {
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(78, 205, 196, 0.4);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
        }

        .sidebar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            height: fit-content;
        }

        .content-area {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .tool-section {
            margin-bottom: 25px;
        }

        .tool-section h3 {
            margin-bottom: 15px;
            color: #ffd93d;
            font-size: 1.2em;
        }

        .tool-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        .tool-btn {
            padding: 12px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9em;
        }

        .tool-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .emoji-picker {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
            margin-top: 10px;
        }

        .emoji {
            font-size: 1.5em;
            cursor: pointer;
            text-align: center;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .emoji:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.2);
        }

        .chat-area {
            height: 400px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .message {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 16px;
            border-radius: 15px;
            margin-bottom: 10px;
            border-left: 4px solid #ffd93d;
        }

        .message-time {
            font-size: 0.8em;
            opacity: 0.7;
            margin-left: 10px;
        }

        .input-area {
            display: flex;
            gap: 10px;
        }

        .message-input {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1em;
            outline: none;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .message-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .whiteboard {
            width: 100%;
            height: 400px;
            border: 2px solid #ffd93d;
            border-radius: 15px;
            cursor: crosshair;
            background: white;
        }

        .drawing-tools {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .color-picker {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
        }

        .file-upload {
            display: none;
        }

        .upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: #ffd93d;
            background: rgba(255, 217, 61, 0.1);
        }

        .connected-devices {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }

        .device-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .status-online {
            color: #4ecdc4;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #4ecdc4;
            display: inline-block;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 5px;
        }

        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: rgba(255, 217, 61, 0.3);
            color: #ffd93d;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .connection-code {
                flex-direction: column;
            }
            
            .code-display {
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">📱💻 ShareConnect</div>
            <p>Real-time sharing between phone and system</p>
        </div>

        <div class="connection-section">
            <h2>🔗 Connection</h2>
            <div class="connection-code">
                <div>
                    <strong>Room Code:</strong>
                    <div class="code-display" id="roomCode">ABC123</div>
                </div>
                <button class="btn btn-primary" onclick="generateNewCode()">New Code</button>
                <button class="btn btn-secondary" onclick="copyCode()">Copy Code</button>
            </div>
            
            <div>
                <input type="text" id="joinCode" placeholder="Enter room code to join..." 
                       style="padding: 12px; border-radius: 25px; border: none; background: rgba(255,255,255,0.1); color: white; margin-right: 10px; width: 200px;">
                <button class="btn btn-secondary" onclick="joinRoom()">Join Room</button>
            </div>

            <div class="connected-devices">
                <h4>Connected Devices:</h4>
                <div id="deviceList">
                    <div class="device-item">
                        <span><span class="status-indicator"></span>Your Device</span>
                        <span class="status-online">Online</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="tool-section">
                    <h3>📤 Quick Share</h3>
                    <div class="tool-buttons">
                        <div class="tool-btn" onclick="openFileUpload('image')">📷 Photo</div>
                        <div class="tool-btn" onclick="openFileUpload('video')">🎥 Video</div>
                        <div class="tool-btn" onclick="openFileUpload('audio')">🎵 Music</div>
                        <div class="tool-btn" onclick="openFileUpload('file')">📁 File</div>
                    </div>
                </div>

                <div class="tool-section">
                    <h3>😊 Emojis & Stickers</h3>
                    <div class="emoji-picker">
                        <span class="emoji" onclick="sendEmoji('😀')">😀</span>
                        <span class="emoji" onclick="sendEmoji('😂')">😂</span>
                        <span class="emoji" onclick="sendEmoji('❤️')">❤️</span>
                        <span class="emoji" onclick="sendEmoji('👍')">👍</span>
                        <span class="emoji" onclick="sendEmoji('🎉')">🎉</span>
                        <span class="emoji" onclick="sendEmoji('🔥')">🔥</span>
                        <span class="emoji" onclick="sendEmoji('💯')">💯</span>
                        <span class="emoji" onclick="sendEmoji('🚀')">🚀</span>
                    </div>
                </div>

                <div class="tool-section">
                    <h3>📍 Quick Actions</h3>
                    <div class="tool-buttons">
                        <div class="tool-btn" onclick="shareLocation()">📍 Location</div>
                        <div class="tool-btn" onclick="shareLink()">🔗 Link</div>
                        <div class="tool-btn" onclick="takeScreenshot()">📸 Screenshot</div>
                    </div>
                </div>
            </div>

            <div class="content-area">
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('chat')">💬 Chat</div>
                    <div class="tab" onclick="switchTab('whiteboard')">🎨 Whiteboard</div>
                    <div class="tab" onclick="switchTab('files')">📁 Files</div>
                </div>

                <div id="chatTab" class="tab-content active">
                    <div class="chat-area" id="chatArea">
                        <div class="message">
                            <strong>System:</strong> Room created successfully! Share the code with others to connect.
                            <span class="message-time">Just now</span>
                        </div>
                    </div>
                    
                    <div class="input-area">
                        <input type="text" class="message-input" id="messageInput" 
                               placeholder="Type your message..." onkeypress="handleEnter(event)">
                        <button class="btn btn-primary" onclick="sendMessage()">Send</button>
                    </div>
                </div>

                <div id="whiteboardTab" class="tab-content">
                    <div class="drawing-tools">
                        <input type="color" class="color-picker" id="colorPicker" value="#000000">
                        <input type="range" id="brushSize" min="1" max="20" value="5" 
                               style="margin: 0 10px;">
                        <button class="btn btn-secondary" onclick="clearCanvas()">Clear</button>
                        <button class="btn btn-secondary" onclick="saveDrawing()">Save</button>
                    </div>
                    <canvas class="whiteboard" id="whiteboard"></canvas>
                </div>

                <div id="filesTab" class="tab-content">
                    <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                        <h3>📤 Drag & Drop Files Here</h3>
                        <p>or click to browse</p>
                    </div>
                    <div id="fileList"></div>
                </div>
            </div>
        </div>
    </div>

    <input type="file" id="fileInput" class="file-upload" multiple onchange="handleFileUpload(event)">

    <script>
        // Global variables
        let roomCode = 'ABC123';
        let connectedDevices = [];
        let messages = [];
        let isDrawing = false;
        let canvas, ctx;

        // Initialize canvas
        function initCanvas() {
            canvas = document.getElementById('whiteboard');
            ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;

            // Mouse events
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);

            // Touch events for mobile
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
        }

        function handleTouch(e) {
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches[0];
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            
            if (e.type === 'touchstart') {
                isDrawing = true;
                ctx.beginPath();
                ctx.moveTo(x, y);
            } else if (e.type === 'touchmove' && isDrawing) {
                ctx.lineTo(x, y);
                ctx.stroke();
            }
        }

        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            ctx.beginPath();
            ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
        }

        function draw(e) {
            if (!isDrawing) return;
            const rect = canvas.getBoundingClientRect();
            ctx.lineWidth = document.getElementById('brushSize').value;
            ctx.lineCap = 'round';
            ctx.strokeStyle = document.getElementById('colorPicker').value;
            ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            addMessage('System', 'Whiteboard cleared');
        }

        function saveDrawing() {
            const link = document.createElement('a');
            link.download = 'whiteboard-drawing.png';
            link.href = canvas.toDataURL();
            link.click();
            addMessage('System', 'Drawing saved as image');
        }

        // Tab switching
        function switchTab(tabName) {
            // Hide all tab contents
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'whiteboard') {
                setTimeout(initCanvas, 100);
            }
        }

        // Room management
        function generateNewCode() {
            roomCode = Math.random().toString(36).substring(2, 8).toUpperCase();
            document.getElementById('roomCode').textContent = roomCode;
            addMessage('System', `New room code generated: ${roomCode}`);
        }

        function copyCode() {
            navigator.clipboard.writeText(roomCode).then(() => {
                addMessage('System', 'Room code copied to clipboard!');
            });
        }

        function joinRoom() {
            const joinCode = document.getElementById('joinCode').value.toUpperCase();
            if (joinCode) {
                roomCode = joinCode;
                document.getElementById('roomCode').textContent = roomCode;
                addMessage('System', `Joined room: ${roomCode}`);
                simulateDeviceConnection();
            }
        }

        // Message handling
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            if (message) {
                addMessage('You', message);
                input.value = '';
                // Simulate echo from connected device
                setTimeout(() => {
                    addMessage('Connected Device', `Received: ${message}`);
                }, 1000);
            }
        }

        function handleEnter(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function addMessage(sender, content) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            messageDiv.innerHTML = `<strong>${sender}:</strong> ${content} 
                                   <span class="message-time">${new Date().toLocaleTimeString()}</span>`;
            chatArea.appendChild(messageDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function sendEmoji(emoji) {
            addMessage('You', emoji);
            // Simulate echo from connected device
            setTimeout(() => {
                addMessage('Connected Device', `Received emoji: ${emoji}`);
            }, 500);
        }

        // File handling
        function openFileUpload(type) {
            const fileInput = document.getElementById('fileInput');
            switch(type) {
                case 'image':
                    fileInput.accept = 'image/*';
                    break;
                case 'video':
                    fileInput.accept = 'video/*';
                    break;
                case 'audio':
                    fileInput.accept = 'audio/*';
                    break;
                default:
                    fileInput.accept = '*';
            }
            fileInput.click();
        }

        function handleFileUpload(event) {
            const files = event.target.files;
            for (let file of files) {
                addFileToList(file);
                addMessage('You', `📎 Shared: ${file.name} (${(file.size/1024/1024).toFixed(2)}MB)`);
            }
        }

        function addFileToList(file) {
            const fileList = document.getElementById('fileList');
            const fileDiv = document.createElement('div');
            fileDiv.className = 'message';
            
            let fileIcon = '📁';
            if (file.type.startsWith('image/')) fileIcon = '🖼️';
            else if (file.type.startsWith('video/')) fileIcon = '🎥';
            else if (file.type.startsWith('audio/')) fileIcon = '🎵';
            
            fileDiv.innerHTML = `
                ${fileIcon} <strong>${file.name}</strong> 
                <span style="opacity: 0.7">(${(file.size/1024/1024).toFixed(2)}MB)</span>
                <button class="btn btn-secondary" style="margin-left: 10px; padding: 5px 10px; font-size: 0.8em;" 
                        onclick="downloadFile('${file.name}')">Download</button>
            `;
            fileList.appendChild(fileDiv);
        }

        function downloadFile(filename) {
            addMessage('System', `Downloading ${filename}...`);
        }

        // Quick actions
        function shareLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((position) => {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    addMessage('You', `📍 Location shared: https://maps.google.com/?q=${lat},${lon}`);
                });
            } else {
                addMessage('System', 'Location sharing not supported');
            }
        }

        function shareLink() {
            const url = prompt('Enter URL to share:');
            if (url) {
                addMessage('You', `🔗 Link shared: ${url}`);
            }
        }

        function takeScreenshot() {
            addMessage('System', '📸 Screenshot feature would capture screen here');
        }

        function simulateDeviceConnection() {
            setTimeout(() => {
                const deviceList = document.getElementById('deviceList');
                const newDevice = document.createElement('div');
                newDevice.className = 'device-item';
                newDevice.innerHTML = `
                    <span><span class="status-indicator"></span>Mobile Device</span>
                    <span class="status-online">Online</span>
                `;
                deviceList.appendChild(newDevice);
                addMessage('System', '📱 New device connected!');
            }, 2000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initCanvas();
            addMessage('System', 'Welcome to ShareConnect! 🎉');
            addMessage('System', 'Share your room code with others to start connecting and sharing files, messages, and drawings in real-time.');
        });
        <!-- Socket.IO Client -->
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script>
  const socket = io("http://localhost:5000");

  let currentRoom = "";

  // जब room join करो
  function joinRoom(roomCode) {
    currentRoom = roomCode;
    socket.emit("join-room", roomCode);
  }

  // Chat bhejna
  function sendMessage() {
    const input = document.getElementById("messageInput");
    const msg = input.value.trim();
    if (!msg || !currentRoom) return;

    socket.emit("chat-message", { room: currentRoom, sender: "You", text: msg });
    addMessage("You", msg);
    input.value = "";
  }

  // Chat receive karna
  socket.on("chat-message", (data) => {
    addMessage(data.sender, data.text);
  });

  socket.on("system", (msg) => {
    addMessage("System", msg);
  });

  // Whiteboard sync
  function shareDraw(x, y, color, size) {
    if (currentRoom) {
      socket.emit("draw", { room: currentRoom, x, y, color, size });
    }
  }

  socket.on("draw", (data) => {
    const ctx = document.getElementById("whiteboard").getContext("2d");
    ctx.fillStyle = data.color;
    ctx.beginPath();
    ctx.arc(data.x, data.y, data.size, 0, Math.PI * 2);
    ctx.fill();
  });
</script>

    </script>
</body>
</html>
